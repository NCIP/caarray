<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.9"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.9
    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd">
    <preConditions>
        <dbms type="mysql" />
    </preConditions>

    <!-- 2.4.0 changes -->    
    <changeSet id="20803" author="dkokotov">
       <comment>GF 20803 - liquibase upgrade - finalize by getting rid of schema_version</comment>
       <delete tableName="config_parameter">
           <where>param='SCHEMA_VERSION'</where>
       </delete>
    </changeSet>
    
   <changeSet id="25621" author="jscott">
      <comment>GF 25621 - Illumina: Retrofit already-imported Illumina TXT data files</comment>
      <update tableName="caarrayfile">
         <column name="type" value="ILLUMINA_DERIVED_TXT"/>
         <where>type = 'ILLUMINA_DATA_TXT'</where>
      </update>
   </changeSet>
    
    <changeSet id="26037" author="dkokotov">
       <comment>GF 26037 - upgrade to CSM 4.2</comment>
       <sqlFile path="db-upgrade/mysql/2.4.0/26037.sql"/>
    </changeSet>    

    <changeSet id="26323" author="dkokotov">
       <comment>GF 26323 - improve workspace page performance</comment>
       <sqlFile path="db-upgrade/mysql/2.4.0/26323.sql"/>
    </changeSet>    

    <changeSet id="26558" author="dkokotov">
       <comment>GF 26558 - fix existing illumina CSV designs to use physical probes</comment>
       <sqlFile path="db-upgrade/mysql/2.4.0/26558.sql"/>
    </changeSet>    

    <changeSet id="26324" author="dkokotov">
       <comment>GF 26324 - improve performance of imported files</comment>
       <sqlFile path="db-upgrade/mysql/2.4.0/26324.sql"/>
    </changeSet>
    
    <changeSet id="27274" author="jscott" failOnError=false>
      <comment>GF 27274 - Parse Agilent GEML/xml array designs for aCGH assays.</comment>
      <sqlFile path="db-upgrade/mysql/2.4.0/27274.sql"/>
   </changeSet>
    
    <changeSet id="27274-a" author="jscott">
      <comment>GF 27274 - Parse Agilent GEML/xml array designs for aCGH assays.</comment>
      <sqlFile path="db-upgrade/mysql/2.4.0/27274-a.sql"/>
   </changeSet>
   
   <changeSet id="28412" author="dkokotov">
      <comment>GF 28412 - Fix existing Nimblegen files.</comment>
      <sqlFile path="db-upgrade/mysql/2.4.0/28412.sql"/>
   </changeSet>   
     
   <changeSet id="27307" author="jscott">
      <comment>GF 27307 - Parse Agilent GEML/xml array designs for aCGH assays - allow multiple gene accessions.</comment>
      <sqlFile path="db-upgrade/mysql/2.4.0/27307.sql"/>
   </changeSet>
</databaseChangeLog>
